<!DOCTYPE HTML>
<html>
    <head>
	<script src="a.js" type="text/javascript"></script>
	<script src="convolution.js" type="text/javascript"></script>
        <script>
 
           window.onload = function(){
    var imageObj = new Image();
    imageObj.onload = function(){
        drawImage(this);
    };
    imageObj.src = "cat.jpg";
};
 
function drawImage(imageObj){
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
 
    var destX = 69;
    var destY = 50;
 
    //context.drawImage(imageObj, destX, destY); 
	//context.drawImage(imageObj,400,330,400,300);
	context.drawImage(imageObj,0,0);
 
    var imageData = context.getImageData(0, 0, imageObj.width, imageObj.height);
    var data = imageData.data;
 
    for (var i = 0; i < data.length; i += 4) {
        var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];
		//var brightness=(data[i]+data[i + 1]+data[i + 2])/3;
 
        data[i] = brightness; // red
        data[i + 1] = brightness; // green
        data[i + 2] = brightness; // blue
        // i+3 is alpha (the fourth element)
    }
//addition=add(7,7);
height1=4;
width1=5;
height2=4;
width2=3;
a= new Array(height1);
	for (i = 0; i <height1; ++ i)
		a[i] = new Array(width1);
	
	b= new Array(height2);
	for (i = 0; i <height2; ++ i)
		b[i] = new Array(width2);

a[0][0]=1;
a[0][1]=1;
a[0][2]=1;
a[0][3]=1;
a[0][4]=1;
a[1][0]=2;
a[1][1]=2;
a[1][2]=2;
a[1][3]=2;
a[1][4]=2;
a[2][0]=3;
a[2][1]=3;
a[2][2]=3;
a[2][3]=3;
a[2][4]=3;
a[3][0]=4;
a[3][1]=4;
a[3][2]=4;
a[3][3]=4;
a[3][4]=4;

b[0][0]=2;
b[0][1]=2;
b[0][2]=2;
b[1][0]=4;
b[1][1]=4;
b[1][2]=4;
b[2][0]=5;
b[2][1]=5;
b[2][2]=5;
b[3][0]=6;
b[3][1]=6;
b[3][2]=6;
c ='valid';		
con=convolution(a,b,c);
	//document.write("aaaaaaaa");
//for (var i = 0; i < 3; i += 1)
//for (var j = 0; i < 3; j += 1)

for(i=0;i<con.length;i++)
{
	for(j=0;j<con[0].length;j++)
	{
		document.write(con[i][j]);
		document.write(" ;");	
	}
	document.write("<br>");
	document.write("<br>");
}
 
    // overwrite original image
  // context.putImageData(imageData, 0, 0);
   
   for (var i = 0; i < data.length; i += 4) {
       // var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];
		//var brightness=(data[i]+data[i + 1]+data[i + 2])/3;
 
       // data[i] = 0; // red
        //data[i + 1] = 0; // green
        //data[i + 2] = 0; // blue
		//data[i + 3] = 0;
        // i+3 is alpha (the fourth element)
    }
	
	 context.putImageData(imageData, 0, 0);
	 
  // data[4]=
  /* var img = context.createImageData(1024, 1024);
for (var i = img.data.length; --i >= 0; )
  img.data[i] = 0;
context.putImageData(img, 0, 0);*/
	//document.write(data[4]);
	//document.write(data[5]);
	//document.write(data[6]);
	
   
}


 
        </script>
    </head>
    <body>
        <canvas id="myCanvas" width="1024" height="1024">
        </canvas>
    </body>
</html>